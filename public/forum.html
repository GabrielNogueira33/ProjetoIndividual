<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Pound | Fórum</title>

    <script src="./js/sessao.js"></script>

    <link rel="stylesheet" href="./css/estilo.css">
    <link rel="icon" href="./imagens/pixel-art-logo.png">
    <link rel="preconnect" href="https://fonts.gstatic.com">
</head>

<body>

    <!--header inicio-->
    <div class="header">
        <div class="container">
            <h1 class="titulo"><img class="logo" src="./imagens/pixel-art-logo.png">Pound</h1>
            <ul class="navbar">
                <li>
                    <a href="./index.html">Inicial</a>
                </li>
                <li class="agora">Fórum</li>
                <li>
                    <a href="./objetivos.html">Objetivos</a>
                </li>
                <li>|</li>
                <li>
                    <a href="./login.html">Login</a>
                </li>
                <li>
                    <a href="./cadastro.html">Cadastro</a>
                </li>

            </ul>
        </div>
    </div>


    <!-- fórum inicio -->
    <div class="forum">
        <div class="container">
            <h2>Fórum</h2>
            <button id="button_topico" onclick="criarTopico()" style="height: 20px; width: 200px;">
                Criar tópico
            </button>
            <div id="criacao_forum" style="display:none"><br>
                Insira o titulo:<input id="input_titulo" />
                <button id="button_criarTitulo">Criar </button>
            </div>
            <div class="thread">
                <h2>Como jogar CS 2 ?</h2> <button>
                    Mostrar respostas
                </button>
                <div style="display:none;" class="respostas">
                    <p>corre, avista inimigo, para e atira!</p>
                    <hr>
                    <form>
                        <textarea></textarea>
                        <input type="submit" name="acao" value="Enviar!">
                    </form>
                </div>
            </div><!--thread-->
            <div id="insercao_topico"></div>
        </div>
    </div>
    <!-- fórum fim -->

    <!--footer inicio-->
    <div class="footer">
        <div class="container">
            <h4>Feito com amor por aluno &hearts; SPTech &copy; 2023</h4>
            <span class="version">v1.0.0</span>
        </div>
    </div>
    <!--footer fim-->


</body>

</html>

<script>


    let criacaoForum = document.getElementById('criacao_forum');
    let buttonCriarTopico = document.getElementById('button_topico');
    let buttonCriarTitulo = document.getElementById('button_criarTitulo');
    let insercaoTopico = document.getElementById('insercao_topico')

    buttonCriarTopico.addEventListener('click', () => {
        criacaoForum.style.display = 'block';
    });

    buttonCriarTitulo.addEventListener('click', () => {
        let tituloForum = document.getElementById('input_titulo').value
        if (tituloForum.trim() != '') {
            insercaoTopico.innerHTML += `
            <div class="thread">
                <h2>${tituloForum}</h2>
                <button>Mostrar respostas</button>
                <div style="display:none;" class="respostas">
                    <form>
                        <textarea></textarea>
                        <input type="submit" name="acao" value="Enviar!">
                    </form>
                </div>
            </div>`;
            criacaoForum.style.display = 'none';
            document.getElementById('input_titulo').value = '';
            anexar();
        }
        else {
            alert('O título não pode estar vázio!')
        }
    })
    function anexar() {
        let buttonsResposta = document.querySelectorAll('.thread button');

        for (let i = 0; i < buttonsResposta.length; i++) {
            buttonsResposta[i].addEventListener('click', () => {
                let respostas = document.querySelectorAll('.respostas');
                respostas[i].style.display = "block"
            })

        }

        let forms = document.querySelectorAll('form');

        for (let i = 0; i < forms.length; i++) {
            forms[i].addEventListener('submit', (e) => {
                e.preventDefault();
                let conteudo = document.querySelectorAll('textarea')[i];
                forms[i].insertAdjacentHTML('beforebegin', `<p> ${conteudo.value}<p>`)
                conteudo.value = ``
            })
        }
    }
</script>